sap.ui.define(["test462v1s/test462v1s/controller/BaseController","test462v1s/test462v1s/utils/FactoryCall","sap/ui/model/json/JSONModel"],function(e,t,i){"use strict";return e.extend("test462v1s.test462v1s.controller.fragmentsController.PersonaDetailsPage",{constructor:function(e){this.oView=e},add:async function(){this.getView().byId("key").getValue()===""?await t.getProvider("ajax").post("/api","/Persona",{Dni:this.getView().byId("Dni").getValue(),Apellidos:this.getView().byId("Apellidos").getValue(),Edad:Number(this.getView().byId("Edad").getValue()),Estado:this.getView().byId("Estado").getSelected().toString()}):await t.getProvider("ajax").put("/api","/Persona/",this.getView().byId("key").getValue(),{Dni:this.getView().byId("Dni").getValue(),Apellidos:this.getView().byId("Apellidos").getValue(),Edad:Number(this.getView().byId("Edad").getValue()),Estado:this.getView().byId("Estado").getSelected().toString()});let e=await t.getProvider("ajax").getAll("/api","/Personas");this.setModel(new i({PersonaCollection:e}),"PersonaList");this.oView.byId("key").setValue(e.id);this.oView.byId("Dni").setValue("");this.oView.byId("Apellidos").setValue("");this.oView.byId("Edad").setValue("");this.getView().byId("Estado").setSelected(false);this.oView.byId("BotonAceptar").setText("Create");this.close()},open:async function(e){if(!this.oView.byId("Dialog")){let e=sap.ui.xmlfragment(this.oView.getId(),"test462v1s.test462v1s.view.fragments.PersonaDetailsPage",this);this.oView.addDependent(e);e.open()}else{this.byId("Dialog").open()}if(e){let e=null;this.getView().byId("Dialog").setBusy(true);this.getView().byId("PersonaList").getSelectedItems().forEach(t=>e=t.mAggregations.cells[0].getText());let i=await t.getProvider("ajax").get("/api","/Persona",`/${e}`);this.oView.byId("key").setValue(i.id);this.oView.byId("Dni").setValue(i.Dni);this.oView.byId("Apellidos").setValue(i.Apellidos);this.oView.byId("Edad").setValue(i.Edad);this.getView().byId("Estado").setSelected(i.Estado);this.oView.byId("BotonAceptar").setText("Update");this.getView().byId("Dialog").setBusy(false)}},close:function(){this.getView().byId("Dialog").close()}})});